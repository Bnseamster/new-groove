(this["webpackJsonpreact-spotify-dj-app"]=this["webpackJsonpreact-spotify-dj-app"]||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(6),r=a.n(c),i=a(42),s=a.n(i),o=(a(59),a(10));var l=function(e){var t=e.onSubmit,a=Object(c.useState)(""),r=Object(o.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)(""),d=Object(o.a)(l,2),h=d[0],j=d[1],b=Object(c.useState)([]),u=Object(o.a)(b,2),m=u[0],p=u[1],g=Object(c.useState)(""),O=Object(o.a)(g,2),f=O[0],y=O[1],x=Object(c.useState)(""),k=Object(o.a)(x,2),v=k[0],w=k[1],N={C:0,"C#/Db":1,D:2,"D#/Eb":3,E:4,F:5,"F#/Gb":6,G:7,"G#/Ab":8,A:9,"A#/Bb":10,B:11},S=function(e){console.log(e.target.checked),1==e.target.checked?(console.log("1"),e.target.classList.add="green-glow"):e.target.classList.remove="green-glow"};return Object(n.jsx)("section",{className:"container form",onSubmit:function(e){e.preventDefault(),document.getElementById("loadingWheel").style.display="block",console.log(i,h,m,f,v),t({artist:i,track:h,genre:m,tempo:f,key:v})},children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"form-control artist",children:[Object(n.jsx)("label",{children:"Artist"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",name:"artists",placeholder:"i.e. Drake",onChange:function(e){s(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form-control track",children:[Object(n.jsx)("label",{children:"Track"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",name:"tracks",placeholder:"i.e. Started from the Bottom",onChange:function(e){j(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form-control genre",children:[Object(n.jsx)("label",{children:"Genre"}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"boxes-container",children:["acoustic","afrobeat","alt-rock","alternative","ambient","anime","black-metal","bluegrass","blues","bossanova","brazil","breakbeat","british","cantopop","chicago-house","children","chill","classical","club","comedy","country","dance","dancehall","death-metal","deep-house","detroit-techno","disco","disney","drum-and-bass","dub","dubstep","edm","electro","electronic","emo","folk","forro","french","funk","garage","german","gospel","goth","grindcore","groove","grunge","guitar","happy","hard-rock","hardcore","hardstyle","heavy-metal","hip-hop","holidays","honky-tonk","house","idm","indian","indie","indie-pop","industrial","iranian","j-dance","j-idol","j-pop","j-rock","jazz","k-pop","kids","latin","latino","malay","mandopop","metal","metal-misc","metalcore","minimal-techno","movies","mpb","new-age","new-release","opera","pagode","party","philippines-opm","piano","pop","pop-film","post-dubstep","power-pop","progressive-house","psych-rock","punk","punk-rock","r-n-b","rainy-day","reggae","reggaeton","road-trip","rock","rock-n-roll","rockabilly","romance","sad","salsa","samba","sertanejo","show-tunes","singer-songwriter","ska","sleep","songwriter","soul","soundtracks","spanish","study","summer","swedish","synth-pop","tango","techno","trance","trip-hop","turkish","work-out","world-music"].map((function(e){return Object(n.jsxs)("label",{className:"chk-box-container",children:[e,Object(n.jsx)("input",{type:"checkbox",name:"genres",onChange:function(t){p([e]),S(t)}}),Object(n.jsx)("span",{className:"checkmark"})]})}))})]}),Object(n.jsxs)("div",{className:"form-control tempo",children:[Object(n.jsx)("label",{children:"Tempo"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"text",name:"target_key",placeholder:"130",onChange:function(e){y(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form-control key",children:[Object(n.jsx)("label",{children:"Key"}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"boxes-container key",children:Object.keys(N).map((function(e){return Object(n.jsxs)("label",{className:"chk-box-container",children:[e,Object(n.jsx)("input",{type:"radio",name:"keys",onChange:function(t){console.log(t.target),S(t),w(N[e])}}),Object(n.jsx)("span",{className:"checkmark"})]})}))})]}),Object(n.jsx)("input",{id:"submit",type:"submit",value:"SUBMIT"})]})})},d=a(53),h=a(19),j=a(20),b=a(23),u=a(22),m=a(52),p=function(e){Object(b.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={vidPlayerObj:0},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.player=Object(m.a)(this.videoNode,this.props,(function(){})),this.player.on("click",(function(){if(e.player.paused())console.log("hello");else{var t=e.player.player().id();e.setState({vidPlayerObj:e.player.player().id()}),console.log(t),e.props.onPlay(parseInt(t))}}))}},{key:"componentWillUnmount",value:function(){this.player&&this.player.dispose()}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{"data-vjs-player":!0,children:Object(n.jsx)("video",{id:this.props.recNum,ref:function(t){return e.videoNode=t},className:"video-js"})})}}]),a}(r.a.Component);var g=function(e){var t=e.pauseOther,a=e.recNum,c=e.track,r=e.artist,i=e.coverArtURL,s=e.preview,o={autoplay:!1,controls:!0,sources:[{src:"".concat(s),type:"audio/mpeg"}]};return Object(n.jsxs)("div",{className:"recommendation",children:[Object(n.jsx)("div",{className:"rec-number",children:a}),Object(n.jsx)("div",{className:"rec-img",children:Object(n.jsx)("img",{src:i,alt:"album cover for ".concat(c," by ").concat(r)})}),Object(n.jsxs)("div",{className:"rec-name",children:[Object(n.jsx)("h2",{className:"track-name",children:c}),Object(n.jsx)("p",{children:"by"}),Object(n.jsx)("h3",{className:"artists-name",children:r})]}),Object(n.jsx)("div",{className:"rec-preview",children:"null"!=s&&Object(n.jsx)(p,Object(d.a)({recNum:a,onPlay:t},o))})]})},O={margin:"auto",background:"rgba(241, 242, 243, 0)",display:"none",shapeRendering:"auto"},f=function(){return Object(n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"loadingWheel",style:O,width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(n.jsx)("g",{transform:"rotate(0 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(30 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(60 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(90 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(120 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(150 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(180 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(210 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(240 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(270 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(300 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"})})}),Object(n.jsx)("g",{transform:"rotate(330 50 50)",children:Object(n.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(n.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"})})})]})},y=function(e){var t=e.recommendations,a=e.pauseOther;return Object(n.jsxs)("section",{className:"container recommendations",children:[console.log(t),0==t.length&&Object(n.jsx)(f,{}),t.map((function(e,t){return Object(n.jsx)(g,{pauseOther:a,recNum:t+1,track:JSON.stringify(e.name),artist:e.artists[0].name,coverArtURL:"".concat(e.album.images[1].url),preview:"".concat(e.preview_url)},t)}))]})},x=a(11),k=a.n(x),v=a(49),w=function(e){Object(b.a)(a,e);var t=Object(u.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(v.a,{children:Object(n.jsx)("title",{children:"New Groove"})})})}}]),a}(r.a.PureComponent);var N=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(c.useState)(""),s=Object(o.a)(i,2),d=(s[0],s[1]),h=Object(c.useState)(""),j=Object(o.a)(h,2),b=(j[0],j[1]),u=Object(c.useState)([]),m=Object(o.a)(u,2),p=m[0],g=m[1],O=Object(c.useState)({}),f=Object(o.a)(O,2),x=f[0],v=f[1],N=Object(c.useState)({obj:{},id:-1}),S=Object(o.a)(N,2),C=S[0],T=S[1],_="5895f98c24ce4792826ece2403169238",B="bce4f73f463f492c925b57164f0986d8";function E(e){return Math.floor(Math.random()*e)}return Object(c.useEffect)((function(){var e=x.artist,t=x.track,n=x.genre,c=""===x.tempo?"":"&target_tempo=".concat(x.tempo),i=(""===x.key||"&target_key=".concat(x.key),""),s="",o="";if(""!=e){if(0===Object.keys(x).length)return console.log("HERE");g([]),d(""),b(""),r(""),k()("https://accounts.spotify.com/api/token",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(_+":"+B)},data:"grant_type=client_credentials",method:"POST"}).then((function(t){return r(t.data.access_token),o=t.data.access_token,k()("https://api.spotify.com/v1/search?q=".concat(e,"&type=artist&market=US&limit=").concat(1),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){if(d(e.data.artists.items[0].id),i=e.data.artists.items[0].id,(n=0===n.length?e.data.artists.items[0].genres:n).length>3){for(var t=[];t.length<3;)if(n[E(n.length)]){var a=E(n.length);t.push(n[a]),n.splice(a,1)}n=t.join(",")}else n=n.join(",");return n=n.replace(/[ ,]/g,"%20"),k()("https://api.spotify.com/v1/artists/".concat(i,"/top-tracks?market=US"),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){return console.log(e.data.tracks),b(e.data.tracks[0].id),s=e.data.tracks[0].id,console.log(n,i,s),console.log(a),k()("https://api.spotify.com/v1/recommendations?limit=50&market=US&seed_artists=".concat(i,"&seed_genres=").concat(n,"&seed_tracks=").concat(s,"&min_popularity=").concat(20).concat(c),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){g(e.data.tracks)})).catch((function(e){console.error(e)}))}else if(""==e&&""!=t){if(0===Object.keys(x).length)return console.log("HERE");g([]),d(""),b(""),r(""),k()("https://accounts.spotify.com/api/token",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(_+":"+B)},data:"grant_type=client_credentials",method:"POST"}).then((function(e){return r(e.data.access_token),o=e.data.access_token,k()("https://api.spotify.com/v1/search?q=".concat(t,"&type=track&market=US&limit=").concat(1),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){if(console.log(e.data),i=e.data.tracks.items[0].album.artists[0].id,s=e.data.tracks.items[0].id,n=0===n.length?e.data.artists.items[0].genres:n,console.log(n),n.length>3){for(var t=[];t.length<3;)if(n[E(n.length)]){var a=E(n.length);t.push(n[a]),n.splice(a,1)}n=t.join(",")}else n=n.join(",");return n=n.replace(/[ ,]/g,"%20"),k()("https://api.spotify.com/v1/recommendations?limit=50&market=US&seed_artists=".concat(i,"&seed_genres=").concat(n,"&seed_tracks=").concat(s,"&min_popularity=").concat(20).concat(c),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){g(e.data.tracks)})).catch((function(e){console.error(e)}))}}),[x]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(w,{}),Object(n.jsx)("h1",{id:"heading",children:"Song Recommender"}),Object(n.jsx)(l,{onSubmit:function(e){v(e),console.log(x)}}),Object(n.jsx)(y,{pauseOther:function(e){-1!=C.id?e!=C.id&&(C.obj.pause(),T({obj:document.getElementById("".concat(e,"_html5_api")),id:e})):T({obj:document.getElementById("".concat(e,"_html5_api")),id:e})},recommendations:p})]})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,106)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root")),S()},59:function(e,t,a){},60:function(e,t){}},[[105,1,2]]]);
//# sourceMappingURL=main.38a10de3.chunk.js.map