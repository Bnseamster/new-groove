(this["webpackJsonpreact-spotify-dj-app"]=this["webpackJsonpreact-spotify-dj-app"]||[]).push([[0],{55:function(e,t,a){},56:function(e,t){},99:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(7),o=a.n(n),r=a(37),s=a.n(r),i=(a(55),a(9));var l=function(e){var t=e.onSubmit,a=Object(n.useState)(""),o=Object(i.a)(a,2),r=o[0],s=o[1],l=Object(n.useState)(""),d=Object(i.a)(l,2),u=d[0],h=d[1],p=Object(n.useState)([]),m=Object(i.a)(p,2),j=m[0],b=m[1],f=Object(n.useState)(""),g=Object(i.a)(f,2),O=g[0],k=g[1],y=Object(n.useState)(""),v=Object(i.a)(y,2),x=v[0],S=v[1],N={C:0,"C#/Db":1,D:2,"D#/Eb":3,E:4,F:5,"F#/Gb":6,G:7,"G#/Ab":8,A:9,"A#/Bb":10,B:11},_=function(e){console.log(e.target.checked),1==e.target.checked?(console.log("1"),e.target.classList.add="green-glow"):e.target.classList.remove="green-glow"};return Object(c.jsx)("section",{className:"container form",onSubmit:function(e){e.preventDefault(),console.log(r,u,j,O,x),t({artist:r,track:u,genre:j,tempo:O,key:x})},children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-control artist",children:[Object(c.jsx)("label",{children:"Artist"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"artists",placeholder:"i.e. Drake",onChange:function(e){s(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-control track",children:[Object(c.jsx)("label",{children:"Track"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"tracks",placeholder:"i.e. Started from the Bottom",onChange:function(e){h(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-control genre",children:[Object(c.jsx)("label",{children:"Genre"}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"boxes-container",children:["acoustic","afrobeat","alt-rock","alternative","ambient","anime","black-metal","bluegrass","blues","bossanova","brazil","breakbeat","british","cantopop","chicago-house","children","chill","classical","club","comedy","country","dance","dancehall","death-metal","deep-house","detroit-techno","disco","disney","drum-and-bass","dub","dubstep","edm","electro","electronic","emo","folk","forro","french","funk","garage","german","gospel","goth","grindcore","groove","grunge","guitar","happy","hard-rock","hardcore","hardstyle","heavy-metal","hip-hop","holidays","honky-tonk","house","idm","indian","indie","indie-pop","industrial","iranian","j-dance","j-idol","j-pop","j-rock","jazz","k-pop","kids","latin","latino","malay","mandopop","metal","metal-misc","metalcore","minimal-techno","movies","mpb","new-age","new-release","opera","pagode","party","philippines-opm","piano","pop","pop-film","post-dubstep","power-pop","progressive-house","psych-rock","punk","punk-rock","r-n-b","rainy-day","reggae","reggaeton","road-trip","rock","rock-n-roll","rockabilly","romance","sad","salsa","samba","sertanejo","show-tunes","singer-songwriter","ska","sleep","songwriter","soul","soundtracks","spanish","study","summer","swedish","synth-pop","tango","techno","trance","trip-hop","turkish","work-out","world-music"].map((function(e){return Object(c.jsxs)("label",{className:"chk-box-container",children:[e,Object(c.jsx)("input",{type:"checkbox",name:"genres",onChange:function(t){b([e]),_(t)}}),Object(c.jsx)("span",{className:"checkmark"})]})}))})]}),Object(c.jsxs)("div",{className:"form-control tempo",children:[Object(c.jsx)("label",{children:"Tempo"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"target_key",placeholder:"130",onChange:function(e){k(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-control key",children:[Object(c.jsx)("label",{children:"Key"}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"boxes-container key",children:Object.keys(N).map((function(e){return Object(c.jsxs)("label",{className:"chk-box-container",children:[e,Object(c.jsx)("input",{type:"radio",name:"keys",onChange:function(t){console.log(t.target),_(t),S(N[e])}}),Object(c.jsx)("span",{className:"checkmark"})]})}))})]}),Object(c.jsx)("input",{id:"submit",type:"submit",value:"SUBMIT"})]})})},d=a(48),u=a(38),h=a(39),p=a(49),m=a(46),j=a(47),b=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var c;return Object(u.a)(this,a),(c=t.call(this,e)).state={vidPlayerObj:0},c}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.player=Object(j.a)(this.videoNode,this.props,(function(){})),this.player.on("click",(function(){if(e.player.paused())console.log("hello");else{var t=e.player.player().id();e.setState({vidPlayerObj:e.player.player().id()}),console.log(t),e.props.onPlay(parseInt(t))}}))}},{key:"componentWillUnmount",value:function(){this.player&&this.player.dispose()}},{key:"render",value:function(){var e=this;return Object(c.jsx)("div",{"data-vjs-player":!0,children:Object(c.jsx)("video",{id:this.props.recNum,ref:function(t){return e.videoNode=t},className:"video-js"})})}}]),a}(o.a.Component);var f=function(e){var t=e.pauseOther,a=e.recNum,n=e.track,o=e.artist,r=e.coverArtURL,s=e.preview,i={autoplay:!1,controls:!0,sources:[{src:"".concat(s),type:"video/mp4"}]};return Object(c.jsxs)("div",{className:"recommendation",children:[Object(c.jsx)("div",{className:"rec-number",children:a}),Object(c.jsx)("div",{className:"rec-img",children:Object(c.jsx)("img",{src:r,alt:"album cover for ".concat(n," by ").concat(o)})}),Object(c.jsxs)("div",{className:"rec-name",children:[Object(c.jsx)("h2",{className:"track-name",children:n}),Object(c.jsx)("p",{children:"by"}),Object(c.jsx)("h3",{className:"artists-name",children:o})]}),Object(c.jsx)("div",{className:"rec-preview",children:"null"!=s&&Object(c.jsx)(b,Object(d.a)({recNum:a,onPlay:t},i))})]})},g=function(e){var t=e.recommendations,a=e.pauseOther;return Object(c.jsxs)("section",{className:"container recommendations",children:[console.log(t),t.map((function(e,t){return Object(c.jsx)(f,{pauseOther:a,recNum:t+1,track:JSON.stringify(e.name),artist:e.artists[0].name,coverArtURL:"".concat(e.album.images[1].url),preview:"".concat(e.preview_url)},t)}))]})},O=a(10),k=a.n(O);var y=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),d=(s[0],s[1]),u=Object(n.useState)(""),h=Object(i.a)(u,2),p=(h[0],h[1]),m=Object(n.useState)([]),j=Object(i.a)(m,2),b=j[0],f=j[1],O=Object(n.useState)({}),y=Object(i.a)(O,2),v=y[0],x=y[1],S=Object(n.useState)({obj:{},id:-1}),N=Object(i.a)(S,2),_=N[0],w=N[1],E="5895f98c24ce4792826ece2403169238",A="bce4f73f463f492c925b57164f0986d8";function B(e){return Math.floor(Math.random()*e)}function T(){console.log("hello")}return Object(n.useEffect)((function(){var e=v.artist,t=v.track,c=v.genre,n=""===v.tempo?"":"&target_tempo=".concat(v.tempo),r=(""===v.key||"&target_key=".concat(v.key),""),s="",i="";if(""!=e){if(0===Object.keys(v).length)return console.log("HERE");f([]),d(""),p(""),o(""),k()("https://accounts.spotify.com/api/token",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(E+":"+A)},data:"grant_type=client_credentials",method:"POST"}).then((function(t){return o(t.data.access_token),i=t.data.access_token,k()("https://api.spotify.com/v1/search?q=".concat(e,"&type=artist&market=US&limit=").concat(1),{method:"GET",headers:{Authorization:"Bearer "+i}})})).catch((function(e){console.error(e)})).then((function(e){if(d(e.data.artists.items[0].id),r=e.data.artists.items[0].id,(c=0===c.length?e.data.artists.items[0].genres:c).length>3){for(var t=[];t.length<3;)if(c[B(c.length)]){var a=B(c.length);t.push(c[a]),c.splice(a,1)}c=t.join(",")}else c=c.join(",");return c=c.replace(/[ ,]/g,"%20"),k()("https://api.spotify.com/v1/artists/".concat(r,"/top-tracks?market=US"),{method:"GET",headers:{Authorization:"Bearer "+i}})})).catch((function(e){console.error(e)})).then((function(e){return console.log(e.data.tracks),p(e.data.tracks[0].id),s=e.data.tracks[0].id,console.log(c,r,s),console.log(a),k()("https://api.spotify.com/v1/recommendations?limit=50&market=US&seed_artists=".concat(r,"&seed_genres=").concat(c,"&seed_tracks=").concat(s,"&min_popularity=").concat(20).concat(n),{method:"GET",headers:{Authorization:"Bearer "+i}})})).catch((function(e){console.error(e)})).then((function(e){f(e.data.tracks)})).catch((function(e){console.error(e)}))}else if(""==e&&""!=t){if(0===Object.keys(v).length)return console.log("HERE");f([]),d(""),p(""),o(""),k()("https://accounts.spotify.com/api/token",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(E+":"+A)},data:"grant_type=client_credentials",method:"POST"}).then((function(e){return o(e.data.access_token),i=e.data.access_token,k()("https://api.spotify.com/v1/search?q=".concat(t,"&type=track&market=US&limit=").concat(1),{method:"GET",headers:{Authorization:"Bearer "+i}})})).catch((function(e){console.error(e)})).then((function(e){if(console.log(e.data),r=e.data.tracks.items[0].album.artists[0].id,s=e.data.tracks.items[0].id,c=0===c.length?e.data.artists.items[0].genres:c,console.log(c),c.length>3){for(var t=[];t.length<3;)if(c[B(c.length)]){var a=B(c.length);t.push(c[a]),c.splice(a,1)}c=t.join(",")}else c=c.join(",");return c=c.replace(/[ ,]/g,"%20"),k()("https://api.spotify.com/v1/recommendations?limit=50&market=US&seed_artists=".concat(r,"&seed_genres=").concat(c,"&seed_tracks=").concat(s,"&min_popularity=").concat(20).concat(n),{method:"GET",headers:{Authorization:"Bearer "+i}})})).catch((function(e){console.error(e)})).then((function(e){f(e.data.tracks)})).catch((function(e){console.error(e)}))}}),[v]),document.querySelectorAll("Video"),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("h1",{id:"heading",children:"Song Recommender"}),Object(c.jsx)(l,{onSubmit:function(e){x(e),console.log(v)}}),Object(c.jsx)(g,{pauseOther:function(e){-1!=_.id?e!=_.id&&(_.obj.pause(),w({obj:document.getElementById("".concat(e,"_html5_api")),id:e})):w({obj:document.getElementById("".concat(e,"_html5_api")),id:e})},recommendations:b}),void document.querySelectorAll("Video").forEach((function(e){e.addEventListener("play",T)}))]})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,100)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),o(e),r(e)}))};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(y,{})}),document.getElementById("root")),v()}},[[99,1,2]]]);
//# sourceMappingURL=main.12659826.chunk.js.map